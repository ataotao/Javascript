<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
    <title> New Document </title>
    <meta name="Generator" content="EditPlus">
    <meta name="Author" content="">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <script src="http://seller.sosoqipei.com/common/plugin/jQuery/jquery-1.11.3.min.js"></script>
    <script language="JavaScript">
        function getImageData(URL) {
            var img = new Image();
            // img.setAttribute('crossOrigin', 'anonymous');
            img.src = URL;
            img.onload = function () {
                var canvas = document.createElement("canvas");
                canvas.width = this.width;
                canvas.height = this.height;

                var ctx = canvas.getContext("2d");
                ctx.drawImage(this, 0, 0);

                var dataURL = canvas.toDataURL("image/png");
                console.log(dataURL);
                // console.log(dataURL.replace(/^data:image\/(png|jpg);base64,/, ""));
            };

        }

        function saveAs(Url, filename) {
            var blob = new Blob([''], {
                type: 'application/octet-stream'
            });
            var url = URL.createObjectURL(blob);
            var a = document.createElementNS('xhtml', 'a');
            a.href = Url;
            a.download = filename;
            var e = document.createEvent('MouseEvents');
            e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            a.dispatchEvent(e);
            URL.revokeObjectURL(url);
        }

        function saveText(t, filename) {
            var mime = 'text/plain';
            saveAs(('data:' + mime + ';charset=utf-8;base64,' + Base64.encode(t)), filename)
        }
    </script>
</head>

<body>
    <input type="button" value="download image" onclick="getImageData('pic2.jpg');">
    <input type="button" value="download image1" onclick="saveAs('pic1.jpg', 'tupian');">
</body>

</html>